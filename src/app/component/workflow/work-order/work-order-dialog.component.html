<div class="dialog dailogContainer" *ngIf="action == 'quotationList'">
  <span class="close-icon" (click)="closeDialog()">
    <img src="assets/icon/close_icon.png" />
  </span>
  <div class="dialog-hdr">
    <div>Quotations</div>
  </div>
  <div class="">
    <div class="trea-data-table table-responsive">
      <table class="table table-striped">
        <thead>
          <tr>
            <th>
              <div class="table-hdr">
                <div>
                  <span>Quote No</span>
                  <span
                    (click)="
                      pageData.sortColumn = 'project_estimate_no';
                      pageData.sortColumnType = 'N';
                      pageData.sortOrder =
                        pageData.sortColumn === 'project_estimate_no'
                          ? pageData.sortOrder === 'ASC'
                            ? 'DSC'
                            : 'ASC'
                          : 'ASC'
                    "
                  >
                    <i
                      [ngClass]="
                        pageData.sortColumn == 'project_estimate_no' &&
                        pageData.sortOrder == 'ASC'
                          ? 'fa-rotate-90'
                          : 'fa-rotate-270'
                      "
                      class="fa fa-signal"
                      aria-hidden="true"
                    ></i>
                  </span>
                </div>
                <div>
                  <input
                    autocomplete="nope"
                    type="text"
                    class="form-control"
                    placeholder=""
                    aria-label=""
                    aria-describedby="basic-addon1"
                    [(ngModel)]="quoteNoSearch"
                  />
                </div>
              </div>
            </th>
            <th>
              <div class="bdr-left table-hdr">
                <div>
                  <span>Date</span>
                  <span
                    (click)="
                      pageData.sortColumn = 'project_estimate_date';
                      pageData.sortColumnType = 'A';
                      pageData.sortOrder =
                        pageData.sortColumn === 'project_estimate_date'
                          ? pageData.sortOrder === 'ASC'
                            ? 'DSC'
                            : 'ASC'
                          : 'ASC'
                    "
                  >
                    <i
                      [ngClass]="
                        pageData.sortColumn == 'project_estimate_date' &&
                        pageData.sortOrder == 'ASC'
                          ? 'fa-rotate-90'
                          : 'fa-rotate-270'
                      "
                      class="fa fa-signal"
                      aria-hidden="true"
                    ></i>
                  </span>
                </div>
                <div>
                  <input
                    autocomplete="nope"
                    type="text"
                    class="form-control"
                    placeholder=""
                    aria-label=""
                    aria-describedby="basic-addon1"
                    [(ngModel)]="dateSearch"
                  />
                </div>
              </div>
            </th>
            <th>
              <div class="bdr-left table-hdr">
                <div>
                  <span>Client</span>
                  <span
                    (click)="
                      pageData.sortColumn = 'client_name';
                      pageData.sortColumnType = 'A';
                      pageData.sortOrder =
                        pageData.sortColumn === 'client_name'
                          ? pageData.sortOrder === 'ASC'
                            ? 'DSC'
                            : 'ASC'
                          : 'ASC'
                    "
                  >
                    <i
                      [ngClass]="
                        pageData.sortColumn == 'client_name' &&
                        pageData.sortOrder == 'ASC'
                          ? 'fa-rotate-90'
                          : 'fa-rotate-270'
                      "
                      class="fa fa-signal"
                      aria-hidden="true"
                    ></i>
                  </span>
                </div>
                <div>
                  <input
                    autocomplete="nope"
                    type="text"
                    class="form-control"
                    placeholder=""
                    aria-label=""
                    aria-describedby="basic-addon1"
                    [(ngModel)]="clientSearch"
                  />
                </div>
              </div>
            </th>
            <th>
              <div class="bdr-left table-hdr">
                <div>
                  <span>Followed by</span>
                  <span
                    (click)="
                      pageData.sortColumn = 'followed_by';
                      pageData.sortColumnType = 'A';
                      pageData.sortOrder =
                        pageData.sortColumn === 'followed_by'
                          ? pageData.sortOrder === 'ASC'
                            ? 'DSC'
                            : 'ASC'
                          : 'ASC'
                    "
                  >
                    <i
                      [ngClass]="
                        pageData.sortColumn == 'followed_by' &&
                        pageData.sortOrder == 'ASC'
                          ? 'fa-rotate-90'
                          : 'fa-rotate-270'
                      "
                      class="fa fa-signal"
                      aria-hidden="true"
                    ></i>
                  </span>
                </div>
                <div>
                  <input
                    autocomplete="nope"
                    type="text"
                    class="form-control"
                    placeholder=""
                    aria-label=""
                    aria-describedby="basic-addon1"
                    [(ngModel)]="followedBySearch"
                  />
                </div>
              </div>
            </th>
            <th>
              <div class="bdr-left table-hdr">
                <div>
                  <span>Status</span>
                  <span
                    (click)="
                      pageData.sortColumn = 'status';
                      pageData.sortColumnType = 'A';
                      pageData.sortOrder =
                        pageData.sortColumn === 'status'
                          ? pageData.sortOrder === 'ASC'
                            ? 'DSC'
                            : 'ASC'
                          : 'ASC'
                    "
                  >
                    <i
                      [ngClass]="
                        pageData.sortColumn == 'status' &&
                        pageData.sortOrder == 'ASC'
                          ? 'fa-rotate-90'
                          : 'fa-rotate-270'
                      "
                      class="fa fa-signal"
                      aria-hidden="true"
                    ></i>
                  </span>
                </div>
                <div>
                  <input
                    autocomplete="nope"
                    type="text"
                    class="form-control"
                    placeholder=""
                    aria-label=""
                    aria-describedby="basic-addon1"
                    [(ngModel)]="statusSearch"
                  />
                </div>
              </div>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr
            *ngFor="
              let indx = index;
              let quote;
              of: pageData.quotationList
                | sortBy
                  : pageData.sortColumn
                  : pageData.sortOrder
                  : pageData.sortColumnType
                | searchfilter: statusSearch:'status'
                | searchfilter: dateSearch:'project_estimate_date'
                | searchfilter: clientSearch:'client_name'
                | searchfilter: quoteNoSearch:'project_estimate_no'
                | searchfilter: followedBySearch:'followed_by'
                | listLengthfilter
                | paginate: paginationKey
            "
            (click)="getSelectedQuotation(quote, indx)"
            [ngClass]="selectedIndex == indx ? 'sel-row-highlight' : ''"
          >
            <td>{{ quote.project_estimate_no }}</td>
            <td>{{ util.getFormatedDate(quote.project_estimate_date) }}</td>
            <td>{{ quote.client_name }}</td>
            <td>{{ quote.followed_by }}</td>
            <td>
              <span class="dn">{{
                indx == 0 ? updateCount(quote.count) : ""
              }}</span
              >{{ quote.status }}
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="treaPagination" *ngIf="pageData.quotationList.length != 0 && constant.ITEM_COUNT != 0">
            <div class="pull-right">
            <span> {{1+(paginationKey.currentPage-1)*paginationKey.itemsPerPage}} -
                {{(paginationKey.itemsPerPage <= listCount) && (paginationKey.itemsPerPage+(paginationKey.currentPage-1)*paginationKey.itemsPerPage <= listCount) ? paginationKey.itemsPerPage+(paginationKey.currentPage-1)*paginationKey.itemsPerPage : listCount}}</span><span>
                of {{listCount}} items</span>
            </div>
            <div class="pull-right">
            <select [(ngModel)]="paginationKey.itemsPerPage" (change)="util.changeItemPerPage()">
                <option *ngFor="let pageNo of constant.PAGINATION_ITEMS" [ngValue]="pageNo"> {{pageNo}} </option>
            </select>
            <span> items per page</span>
            </div>
            <div class="pull-right">
            <pagination-controls (pageChange)="util.changePage($event, paginationKey)" directionLinks="true" autoHide="false"
                previousLabel="Pre" nextLabel="Next" screenReaderPaginationLabel="Pagination" screenReaderPageLabel="page"
                screenReaderCurrentLabel="You're on page">
            </pagination-controls>
            </div>
            <div class="clearfix"></div>
        </div>


  </div>
  <div class="clearfix"></div>

  <div class="errMsgCon" *ngIf="pageData.isError">
    <small>{{ pageData.errMsg }}</small>
  </div>
  <div class="button-row">
    <button type="button" mat-raised-button class="trea-btn" (click)="goToWoSetup()">
      Select
    </button>
    <button type="button" mat-raised-button class="trea-btn" (click)="goToNewWOReview()">
      Review
    </button>
  </div>
  <div class="clearfix"></div>
</div>

<div class="dialog" *ngIf="action == 'updateConfirmation'">
  <span class="close-icon" (click)="closeDialog()">
    <i class="fa fa-times" aria-hidden="true"></i>
  </span>
  <div class="dialog-hdr">
    <div>Work Order Update</div>
  </div>
  <!-- *ngIf="!isSuccess" -->
  <div>
    <div class="dialog-txt">
      <div>Send the update to the project estimator?</div>
    </div>

    <div class="errMsgCon" *ngIf="isError">
      <small>{{ errMsg }}</small>
    </div>

    <div class="action-btn">
      <div class="left pull-left">
        <div class="add-client pull-right">
          <button type="button"
            id="addCRBtn"
            mat-raised-button
            class="treaBtn yes"
            (click)="yes()"
          >
            Yes
          </button>
        </div>
        <div class="clearfix"></div>
      </div>
      <div class="right pull-left">
        <div class="add-client pull-left">
          <button type="button"
            mat-raised-button
            class="treaBtn cancel"
            (click)="closeDialog()"
          >
            Cancel
          </button>
        </div>
        <div class="clearfix"></div>
      </div>
      <div class="clearfix"></div>
    </div>
  </div>
  <!-- <div *ngIf="isSuccess">
        <div class="dialog-txt">{{successMsg}}.</div>
        <div class="action-btn text-center">
            <button id="" mat-raised-button class="treaBtn yes" (click)="closeDialog()">Done</button>
        </div>    
    </div> -->
</div>

<div class="dialog" *ngIf="action == 'createCRConfirmation'">
  <span class="close-icon crDialog" (click)="closeDialog()">
    <i class="fa fa-times" aria-hidden="true"></i>
  </span>
  <div class="dialog-hdr">
    <div>Change Request Warning</div>
  </div>
  <!-- *ngIf="!isSuccess" -->
  <div>
    <div class="dialog-txt">
      <div>{{ dataObj.msg }}</div>
      <!-- <div class="PadT15">Do you want to continue ?</div> -->
    </div>

    <div class="errMsgCon" *ngIf="isError">
      <small>{{ errMsg }}</small>
    </div>

    <div class="button-row">
      <button type="button"
        id="addCRBtn"
        mat-raised-button
        class="trea-btn"
        (click)="continueCreatingCR()"
      >
        Okay
      </button>
      <!-- <button mat-raised-button class="trea-btn" (click)="closeDialog()">Cancel</button> -->
    </div>
  </div>
  <!-- <div *ngIf="isSuccess">
        <div class="dialog-txt">{{successMsg}}.</div>
        <div class="action-btn text-center">
            <button id="" mat-raised-button class="treaBtn yes" (click)="closeDialog()">Done</button>
        </div>    
    </div> -->
</div>

<!-- Approve Confirmation -->
<div class="dialog" *ngIf="action == 'approvalConfirmation'">
    <span class="close-icon" (click)="closeDialog()">
      <i class="fa fa-times" aria-hidden="true"></i>
    </span>
    <div class="dialog-hdr">
      <div>Complete Work Order</div>
    </div>
    <!-- *ngIf="!isSuccess" -->
    <div>
      <div class="dialog-txt text-left">
        <div class="optional">
          <form
            autocomplete="off"
            role="form"
            [formGroup]="addApproveConfirmationNoteForm"
          >
            <div class="noteLbl">Note:</div>
            <div class="form-group">
              <!-- formControlName="approve_note" -->
              <textarea
                placeholder="(Optional)"
                class="inputDetail"
                rows="4"
                formControlName="approve_note"
              ></textarea>
            </div>
          </form>
        </div>
      </div>
  
      <div class="errMsgCon" *ngIf="isError">
        <small>{{ errMsg }}</small>
      </div>
  
      <div class="button-row">
        <button type="button"
          id="confirm-btn"
          mat-raised-button
          class="trea-btn"
          (click)="confirm()"
        >
          Confirm
        </button>
        <button type="button" mat-raised-button class="trea-btn" (click)="closeDialog()">
          Cancel
        </button>
      </div>
    </div>
    <!-- <div *ngIf="isSuccess">
              <div class="dialog-txt">{{successMsg}}.</div>
              <div class="button-row">
                  <button id="" mat-raised-button class="trea-btn" (click)="closeDialog()">Done</button>
              </div>    
          </div> -->
</div>
  <!-- End -->

  <div class="dialog" *ngIf="action == 'startWorkOrderEditProduct'">
    <span class="close-icon" (click)="closeDialog()">
      <i class="fa fa-times" aria-hidden="true"></i>
    </span>
    <div class="dialog-hdr">
      <div>Inventory Stock Alert</div>
    </div>
    <!-- *ngIf="!isSuccess" -->
    <div>
      <div class="dialog-txt text-left">
        <span>{{ inventoryObj.message }}</span>
        <div class="row">&nbsp;</div>
        <div class="text-left">
            <div *ngFor="let item of inventoryObj.data.items">
                <span>#{{item.item_definition_name}}</span>
            </div>
        </div>
      </div>
  
      <div class="button-row">
        <button type="button"
          id="confirm-btn"
          mat-raised-button
          class="trea-btn"
          (click)="editPM()"
        >
          Ok
        </button>
        <button type="button" mat-raised-button class="trea-btn" (click)="closeDialog()">
          Cancel
        </button>
      </div>
    </div>
</div>
