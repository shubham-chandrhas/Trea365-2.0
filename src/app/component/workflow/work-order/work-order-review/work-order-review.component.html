<div class="generateQuoteWrap">
    <div class="pageTitle">New Work Order Information Review</div>
    <div class="container-fluid">
        <div class="selSection">
            <div class="clearfix"></div>
            <div class="newWorkOrderDetails">
                <div class="row">
                    <div class="col-sm-6">
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="label-col">Date</div>
                            </div>
                            <div class="col-sm-6">
                                <div class="info-col">{{util.getFormatedDate(today)}}</div>
                            </div>
                            <div class="clearfix"></div>
                            <div class="col-sm-6">
                                <div class="label-col">Generated by</div>
                            </div>
                            <div class="col-sm-6">
                                <div class="info-col">{{userInfo.first_name}}</div>
                            </div>
                            <div class="clearfix"></div>
                            
                            <div class="clearfix"></div>
                            <div class="col-sm-6">
                                <div class="label-col">Assigned to</div>
                            </div>
                            <div class="col-sm-6">
                                <div class="info-col">Staff</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <div class="row">
                            <div *ngIf="woType == 'external'" class="col-sm-6">
                                <div class="label-col">Client</div>
                            </div>
                            <div *ngIf="woType == 'external'" class="col-sm-6">
                                <div class="info-col">{{pageData.work_location.client_name ? pageData.work_location.client_name : '' }}</div>
                            </div>
                            <div class="clearfix"></div>
                            <div class="col-sm-6">
                                <div class="label-col">Work Location</div>
                            </div>
                            <div class="col-sm-6">
                                <div class="info-col">
                                    <div *ngIf="woType == 'internal' && pageData.repairInfo; else manuallyAddedWorkLocation">
                                        {{pageData.repairInfo.client_work_location}}
                                    </div>
                                    <ng-template #manuallyAddedWorkLocation>
                                        <div *ngIf="woType == 'external'">

                                                {{pageData.work_location && pageData.work_location.client_work_location ? pageData.work_location.client_work_location : ''}}

                                        </div>
                                    </ng-template>
                                </div>


                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="reqDescWrap">
                <h3 class="detailsHeading">Requirements</h3>
                <div class="description" *ngIf="woType == 'external'">
                        {{pageData.requirements}}
                </div>
                <div class="description" *ngIf="woType == 'internal'">
                        {{pageData.scheduleInfo ? pageData.scheduleInfo.requirements : ''}}
                </div>
                
            </div>
            <div class="clearfix"></div>

            <div class="workOrderReviewWrap clearfix">
                <div class="row">
                    <div class="col-sm-12">
                        <p class="titletxt">Schedule</p>
                        <div class="table-responsive workServiceTbl">
                            <table class="table rewiewTbl">
                                <tr>
                                    <th>Start Date</th>
                                    <th>Start Time</th>
                                    <th>End Date</th>
                                    <th>End Time</th>
                                </tr>
                                <tr>
                                    <td>{{util.getFormatedDate(util.stringToDate(pageData.scheduleDetails.start_date))}}</td>
                                    <td>{{pageData.scheduleDetails.start_time}} {{pageData.scheduleDetails.start_time_format}}</td>
                                    <td>{{util.getFormatedDate(util.stringToDate(pageData.scheduleDetails.end_date))}}</td>
                                    <td>{{pageData.scheduleDetails.end_time}} {{pageData.scheduleDetails.end_time_format}}</td>
                                    
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12">
                        <p class="titletxt">Services</p>
                        <div class="table-responsive workServiceTbl">
                            <table class="table rewiewTbl">
                                <tr>
                                    <th width="300">Service Type</th>
                                    <th width="300">Quantity</th>
                                    <th width="300">Details</th>
                                </tr>
                                <tr *ngFor="let item of pageData.servicesDetails.services">
                                    <td>{{item.service_definition}}</td>
                                    <td>{{item.quantity | number:"1.2-2"}}</td>
                                    <td>{{item.details}}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12">
                        <p class="titletxt">Assets</p>
                        <div class="table-responsive workServiceTbl">
                            <table class="table rewiewTbl">
                                <tr>
                                    <th>Name</th>
                                    <th>Start Date</th>
                                    <th>Start Time</th>
                                    <th>End Date</th>
                                    <th>End Time</th>
                                </tr>
                                <tr *ngFor="let item of pageData.assetsDetails">
                                    <td>{{item.asset}}</td>
                                    <td>{{util.getFormatedDate(util.stringToDate(item.start_date))}}</td>
                                    <td>{{item.start_time}} {{item.start_time_format}}</td>
                                    <td>{{util.getFormatedDate(util.stringToDate(item.end_date))}}</td>
                                    <td>{{item.end_time}} {{item.end_time_format}}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12">
                        <p class="titletxt">Team</p>
                        <div class="table-responsive workServiceTbl">
                            <table class="table rewiewTbl">
                                <tr>
                                    <th>Name</th>
                                    <th>Start Date</th>
                                    <th>Start Time</th>
                                    <th>End Date</th>
                                    <th>End Time</th>
                                </tr>
                                <tr *ngFor="let item of pageData.teamDetails">
                                    <td>{{item.staff}} <span *ngIf="item.is_team_leader == 1" style="font-size: 10px;">(Team leader)</span> </td>
                                    <td>{{util.getFormatedDate(util.stringToDate(item.start_date))}}</td>
                                    <td>{{item.start_time}} {{item.start_time_format}}</td>
                                    <td>{{util.getFormatedDate(util.stringToDate(item.end_date))}}</td>
                                    <td>{{item.end_time}} {{item.end_time_format}}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-12">
                        <p class="titletxt">Materials</p>
                        <div class="table-responsive workMaterialTbl">
                            <table class="table rewiewTbl">
                                <tr>
                                    <th width="300">Type</th>
                                    <th width="300">Quantity(Units)</th>
                                    <th width="300">Location</th>
                                </tr>
                                <tr *ngFor="let item of pageData.materialsDetails">
                                    <td>{{item.item_definition_name}}</td>
                                    <td>{{item.quantity}} {{item.uom ? item.uom : ''}}</td>
                                    <td>
                                        <div class="info-col">
                                            <li *ngFor="let locInd = index; let loc of item.locations">
                                                <div style="margin: -20px 0px 10px 0px;">
                                                    <div><span class="locNum">&nbsp;&nbsp;</span>&nbsp;{{loc.main_location}}</div>
                                                    <div><span class="locNum">&nbsp;&nbsp;</span>&nbsp;{{loc.sub_location}}</div>
                                                    <div><span class="locNum">&nbsp;&nbsp;</span>&nbsp;Pick up quantity - {{loc.quantity}} {{item.uom}}</div>
                                                </div>
                                            </li>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
                

                <div class="row">
                    <div class="col-sm-12">
                        <div class="errMsgCon MT20" *ngIf="isError">
                            <small>{{errMsg}}</small>
                        </div>
                        <div class="button-row clearfix">
                            <button type="button"
                                class="trea-btn" mat-raised-button id="previewBtn" (click)="previewDoc()">
                                Preview
                            </button>
                            <button type="button" class="trea-btn " mat-raised-button  id="downloadPDF" (click)="downloadPDF()">
                                Download as PDF
                            </button>
                        </div> 
                        <div class="button-row clearfix">
                            <button type="button" mat-raised-button class="trea-btn" (click)="edit()">Edit</button>
                            <!-- <button mat-raised-button *ngIf="!isExternalWO" class="trea-btn" (click)="edit('internal')">Edit</button>
                            <button mat-raised-button *ngIf="isExternalWO" class="trea-btn" (click)="edit('external')">Edit</button> -->
                            <!-- <button mat-raised-button class="trea-btn">Save</button> -->
                            
                            <button type="button" mat-raised-button class="trea-btn" id="submit" (click)="submit()">Submit</button>
                            <button type="button" mat-raised-button routerLink="/workflow/wo/csa/work-order-list/0" class="trea-btn">Cancel</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
